<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Automated Wheel Truing Stand Part 2 - Project Space</title>
  <link rel="stylesheet" href="../styles.css"/>
  <script src="https://unpkg.com/htmx.org@1.10.2"></script>
  <style>
    body {
      background-color: #23272f;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.6;
    }
    
header {
  max-width: 1100px;
  margin: 0 auto 2rem auto;
  padding: 2rem 0 0 0;
  background: none;
  box-shadow: none;
}
header h1 {
  margin: 0 0 0.5em 0;
  font-size: 2.5rem;
  color: #fff;
  letter-spacing: 2px;
  font-weight: 700;
  text-align: center;
}
.main-nav {
  display: flex;
  gap: 1.5rem;
  background: #fff;
  padding: 1rem 2rem;
  font-size: 1.1rem;
  margin-bottom: 2rem;
  justify-content: center;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  width: 100%;
  box-sizing: border-box;
}
.main-nav a {
  color: #666666;
  text-decoration: none;
  padding: 0.3em 0.7em;
  border-radius: 3px;
  transition: background 0.15s;
}
.main-nav a:hover, .main-nav a.active {
  background: #f0f0f0;
}

    #post-content {
      background-color: white;
      max-width: 1100px;
      margin: 0 auto 2rem;
      padding: 2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-radius: 6px;
      box-sizing: border-box;
    }
    .image-container {
      text-align: center;
      margin: 2em auto;
    }
    .image-container img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }
    .cover-image {
      max-width: 100%;
      margin: 1.5em auto 2.5em;
      text-align: center;
    }
    .cover-image img {
      max-width: 100%;
      height: auto;
      border-radius: 4px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    figure.image-container {
      display: block;
      margin: 2em auto;
    }
    figcaption {
      font-size: 0.9em;
      color: #666;
      margin-top: 0.5em;
      text-align: center;
      font-style: italic;
    }
    h2, h3, h4 {
      color: #23272f;
      font-weight: 700;
      letter-spacing: 0.5px;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    h2 {
      font-size: 2rem;
      border-bottom: 2px solid #bbb;
      display: inline-block;
      padding-bottom: 0.2em;
    }
    h3 {
      font-size: 1.3rem;
    }
    h4 {
      font-size: 1.1rem;
    }
    time {
      display: block;
      color: #666;
      margin-bottom: 1rem;
    }
    p {
      margin-bottom: 1.2rem;
    }
    .site-footer {
      text-align: center;
      color: #888;
      font-size: 1em;
      padding: 2em 0 1em 0;
      background: none;
    }
    .contact-section {
      margin-top: 4rem;
      padding-top: 2rem;
      border-top: 1px solid #ddd;
    }
    .email-form {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      margin-top: 1rem;
    }
    .email-form label {
      font-weight: 500;
    }
    .email-form input[type="text"], 
    .email-form input[type="email"], 
    .email-form textarea {
      padding: 0.7em;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1em;
    }
    .email-form textarea {
      min-height: 120px;
      resize: vertical;
    }
    .email-form button {
      background: #666666;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 0.8em 1.5em;
      font-size: 1em;
      cursor: pointer;
      align-self: flex-start;
      transition: background 0.15s;
    }
    .email-form button:hover {
      background: #555555;
    }
    .subscribe-section {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid #ddd;
    }
    .subscribe-section p {
      margin-bottom: 1rem;
      font-size: 0.95em;
      color: #555;
    }
    .subscribe-input-group {
      display: flex;
      gap: 0.5rem;
      max-width: 500px;
    }
    .subscribe-form input[type="email"] {
      flex: 1;
      padding: 0.7em;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1em;
    }
    .subscribe-form button {
      background: #666666;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 0.7em 1.2em;
      font-size: 1em;
      cursor: pointer;
      white-space: nowrap;
      transition: background 0.15s;
    }
    .subscribe-form button:hover {
      background: #555555;
    }
  </style>
</head>
<body>
  <header>
    <h1>Project Space</h1>
    <nav class="main-nav">
  <a href="/" hx-get="/" hx-swap="innerHTML" hx-target="#content">Home</a>
  <a href="/contact.html" hx-get="/contact.html" hx-swap="innerHTML" hx-target="#content">Contact</a>
</nav>
  </header>
  <article id="post-content">
    <h2>Automated Wheel Truing Stand Part 2</h2>
    <time datetime="2018-12-03">December 03, 2018</time>
    <div class="cover-image"><img src="/assets/images/ats-2-e1541243575856.jpg" alt="Cover image"/></div>
    <p>In my last <a href="https://jackchartres.xyz/2018/06/23/automated-truing-stand-part-1/">blog post</a>, I built a proof of concept prototype for the wheel truing stand. In this blog post, I outline the electronics I selected and programmed as well as the mounting brackets I designed.</p>
<h3>Stage 2: Electronics</h3>
<p>I selected a spare A4988 stepper motor driver from my 3D printer build which would be suitable to drive the NEMA 17 stepper motor. I chose an Arduino Uno to control it and got an 8A 12V DC power supply that would be suitable to power the motor and any additional hardware I would need. I created the following circuit to start things off, using Fritzing to create the electronics CAD diagram.</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="stepper_setup_2" src="/assets/images/stepper_setup_2.jpg" />
<figcaption>Fritzing diagram of Stepper setup</figcaption>
</figure></p>
<p>With the motor now in motion, I had to develop a way for the system to know what position the wheel was in during its rotation. I realised that each spoke around the wheel was approximately equidistant from the spoke next to it, except from the inner tube valve that was in between two of the spokes.</p>
<p>I decided to use a cheap laser diode which I made sure had a beam diameter smaller than the width of each spoke nipple, and a corresponding laser sensor that would measure ON or OFF. This would allow me to detect each spoke or the valve as the wheel rotated and "broke" the beam, acting as a laser tripwire.</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="test" src="/assets/images/test.jpg" />
<figcaption>Laser diode and laser sensor modules</figcaption>
</figure></p>
<p>To mount the laser diode and sensor to the wooden stand, I designed and 3D printed a mounting bracket which would allow for some post-assembly adjustment and enclose the sensor so it would not be affected by changes in external lighting conditions.</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="untitled.55" src="/assets/images/untitled-55-e1541244340188.jpg" />
<figcaption>Laser diode and sensor mount</figcaption>
</figure></p>
<p>I wired up the laser diode to be constantly ON and mounted the bracket to the stand. I found that the enclosure was sufficient so that laser detection during varying external light conditions was not affected.</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="ATS-2" src="/assets/images/ats-2-e1541243575856.jpg" />
<figcaption>Laser diode and sensor in line with spoke nipple</figcaption>
</figure></p>
<p>With the motor, laser diode and sensor wired up to the Arduino, I created an algorithm to count the number of discrete steps the stepper motor made between each detected point (spoke or the valve), noting that the two smallest step counts would be the gaps between the valve and the spokes next to it. I used the previous and present value of the laser sensor after each step to determine whether the system was either in a gap, on a point or at the beginning or end of a point.</p>
<p>I used the Arduino Serial monitor to debug the system.</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="Screenshot 2018-10-20 09.23.07" src="/assets/images/screenshot-2018-10-20-09-23-07-e1541245422740.png" />
<figcaption>Serial Monitor - Counting steps between spokes</figcaption>
</figure></p>
<p>After completing one full revolution (33 points detected), the algorithm could find the two smallest gaps. Then it would determine the position of the valve, and use the most efficient route to get there, find the centre point and then stop. At this point, the system is in the zero position and has homed.</p>
<p>To home the wheel, I found that it was not possible to just use the number of steps counted from the detected valve position to get back to the valve (do the reverse number of steps) as any varying slip on the tyre could cause the system to lose steps. I improved the reliability of the homing algorithm by getting the program to count each point instead, which worked every time.</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="giphy" src="/assets/images/giphy.gif" />
<figcaption>Homing algorithm</figcaption>
</figure></p>
<p>After defining the zero position, I created a "Go to spoke" algorithm, which could move the wheel to any specified spoke, numbered clockwise from 1 to 32 from the valve, in the most efficient direction (clockwise or anti-clockwise).</p>
<p>The following animation shows a test of the "Go to spoke" algorithm, going from spoke 18 to spoke 2 then from spoke 2 to spoke 0 (the valve).</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="giphy3" src="/assets/images/giphy3.gif" />
<figcaption>Go to spoke algorithm</figcaption>
</figure></p>
<p>To measure the deflection of the wheel and measure how "un-true" it was, I bought a cheap digital dial test indicator which claimed to have RS232 serial communication capabilities. After doing some initial research online, I came across this <a href="https://hackaday.io/project/511-digital-dial-indicator-cnc-surface-probe/log/814-the-digital-dial-indicator-and-how-to-read-from-it">hackaday post</a> where someone had used a very similar (if not the same) DTI and successfully communicated with it. </p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="img_20180913_192055.jpg" src="/assets/images/img_20180913_192055-e1541244683225.jpg" />
<figcaption>DTI clamped in mounting bracket</figcaption>
</figure></p>
<p>I designed and 3D printed a DTI mount to hold the DTI in position, perpendicular to the wheel rim, and ensured that the plunger of the DTI lined up with a spoke when the laser was in line with a spoke nipple. As the measured spoke was not the spoke being detected, a measuring offset of 6 spokes was entered into the Arduino code.</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="offsets_2" src="/assets/images/offsets_2.jpg" />
<figcaption>Diagram showing 6 spoke offset between the detected spoke and measured spoke</figcaption>
</figure></p>
<p>To calculate the "perfect" position of the rim, I made an assumption that the stand was perfectly square and that the wheel was in the perfect centre of the stand, thus giving the "perfect" deflection value of the DTI.</p>
<p>I then took the DTI apart to solder four wires to the communication pads for Serial communication. This was by far the hardest soldering I had ever attempted resulting in me breaking the first DTI, possibly by introducing too much heat into the PCB.</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="img_20180827_212719.jpg" src="/assets/images/img_20180827_212719-e1541244531787.jpg" />
<figcaption>Unsuccessful soldering of 4 wires to DTI PCB</figcaption>
</figure></p>
<p>Having ordered a new DTI and a better soldering iron, I successfully soldered the joints and used some electrical tape to reinforce the connections around them. After reassembly, the DTI displayed the results as intended.</p>
<p>I had done some research online and found a <a href="https://github.com/stawel/dialIndicatorToSerial/blob/master/README.md">project</a> that had Aduino code which allows communication with this type of DTI. I connected the DATA and CLOCK pins to analogue inputs on the Arduino and the ground pin to ground, uploaded the code and it worked!</p>
<p><figure class="image-container" style="max-width: 600px; margin: 0 auto;">
<img alt="giphy2" src="/assets/images/giphy2.gif" />
<figcaption>First test of DTI Serial communication</figcaption>
</figure></p>
<p>The next blog post will continue to outline the development of the semi-automated wheel truing process.</p>
    
    <div class="contact-section">
      <h3>Contact Me About This Post</h3>
      <form class="email-form" action="mailto:your-email@example.com" method="post" enctype="text/plain">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required />
        <label for="email">Your Email</label>
        <input type="email" id="email" name="email" required />
        <label for="subject">Subject</label>
        <input type="text" id="subject" name="subject" value="Re: Automated Wheel Truing Stand Part 2" required />
        <label for="message">Message</label>
        <textarea id="message" name="message" required></textarea>
        <button type="submit">Send Email</button>
      </form>
    </div>
    
    <div class="subscribe-section">
      <h3>Subscribe to Blog Updates</h3>
      <p>Enter your email to receive notifications when new posts are published.</p>
      <form class="subscribe-form" action="mailto:your-email@example.com?subject=Blog Subscription" method="post" enctype="text/plain">
        <div class="subscribe-input-group">
          <input type="email" id="subscribe-email" name="subscribe-email" placeholder="Your email address" required />
          <button type="submit">Subscribe</button>
        </div>
      </form>
    </div>
  </article>
  <footer class="site-footer">© jackchartres.xyz 2025</footer>
</body>
</html>